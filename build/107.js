webpackJsonp([107],{1730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AddonCalendarEventPageModule",function(){return f});var o=n(0),i=n(3),a=n(2),r=n(16),c=n(15),d=n(75),l=n(1846),s=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},f=function(){function e(){}return e=s([Object(o.I)({declarations:[l.a],imports:[r.a,c.a,d.a,i.l.forChild(l.a),a.b.forChild()]})],e)}()},1846:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),a=n(2),r=n(380),c=n(882),d=n(42),l=n(9),s=n(4),f=n(77),u=n(10),p=n(5),v=(n.n(p),this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r}),m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,i,a,r,c,d){var l=this;this.translate=e,this.calendarProvider=t,this.domUtils=o,this.coursesProvider=i,this.calendarHelper=a,this.courseProvider=d,this.event={},this.notificationsEnabled=!1,this.eventId=n.get("id"),this.notificationsEnabled=c.isAvailable(),this.siteHomeId=r.getCurrentSite().getSiteHomeId(),this.notificationsEnabled&&(this.calendarProvider.getEventNotificationTimeOption(this.eventId).then(function(e){l.notificationTime=e}),this.calendarProvider.getDefaultNotificationTime().then(function(e){l.defaultTimeReadable=0===e?l.translate.instant("core.settings.disabled"):p.duration(60*e*1e3).humanize()}))}return e.prototype.ionViewDidLoad=function(){var e=this;this.fetchEvent().finally(function(){e.eventLoaded=!0})},e.prototype.updateNotificationTime=function(){!isNaN(this.notificationTime)&&this.event&&this.event.id&&this.calendarProvider.updateNotificationTime(this.event,this.notificationTime)},e.prototype.fetchEvent=function(){var e=this;return this.calendarProvider.getEvent(this.eventId).then(function(t){e.calendarHelper.formatEventData(t),e.event=t;var n=e.translate.instant("addon.calendar.type"+t.eventtype);if(t.moduleIcon){var o=e.courseProvider.translateModuleName(t.modulename);-1===o.indexOf("core.mod_")&&(t.moduleName=o),n=="addon.calendar.type"+t.eventtype&&(n=e.translate.instant("core.mod_"+t.modulename+"."+t.eventtype))=="core.mod_"+t.modulename+"."+t.eventtype&&(n=o)}else n=="addon.calendar.type"+t.eventtype&&(n=t.name);if(e.title=n,t.courseid!=e.siteHomeId)return e.coursesProvider.getUserCourse(t.courseid,!0).then(function(t){e.courseName=t.fullname})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"addon.calendar.errorloadevent",!0)})},e.prototype.refreshEvent=function(e){var t=this;this.calendarProvider.invalidateEvent(this.eventId).finally(function(){t.fetchEvent().finally(function(){e.complete()})})},v([Object(o._9)(i.f),m("design:type",i.f)],e.prototype,"content",void 0),e=v([Object(o.m)({selector:"page-addon-calendar-event",template:'<ion-header>\n    <ion-navbar>\n        <ion-title><core-format-text [text]="title"></core-format-text></ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-refresher [enabled]="eventLoaded" (ionRefresh)="refreshEvent($event)">\n        <ion-refresher-content pullingText="{{ \'core.pulltorefresh\' | translate }}"></ion-refresher-content>\n    </ion-refresher>\n    <core-loading [hideUntil]="eventLoaded">\n        <ion-card>\n            <ion-card-content>\n                <ion-card-title text-wrap>\n                    <ion-icon *ngIf="!event.moduleIcon" name="{{event.icon}}" item-start></ion-icon>\n                    <core-format-text [text]="event.name"></core-format-text>\n                </ion-card-title>\n                <ion-item text-wrap>\n                    <h2>{{ \'addon.calendar.eventstarttime\' | translate}}</h2>\n                    <p>{{ event.timestart | coreToLocaleString }}</p>\n                </ion-item>\n                <ion-item text-wrap *ngIf="event.timeduration > 0">\n                    <h2>{{ \'addon.calendar.eventendtime\' | translate}}</h2>\n                    <p>{{ (event.timestart + event.timeduration) |  coreToLocaleString }}</p>\n                </ion-item>\n                <ion-item text-wrap *ngIf="courseName">\n                    <h2>{{ \'core.course\' | translate}}</h2>\n                    <p><core-format-text [text]="courseName"></core-format-text></p>\n                </ion-item>\n                <ion-item text-wrap *ngIf="event.moduleIcon">\n                    <img *ngIf="event.moduleIcon" src="{{event.moduleIcon}}" item-start alt="" role="presentation" class="core-module-icon"> {{event.moduleName}}\n                </ion-item>\n                <ion-item>\n                    <p text-wrap *ngIf="event.description">\n                        <core-format-text [text]="event.description"></core-format-text>\n                    </p>\n                </ion-item>\n            </ion-card-content>\n        </ion-card>\n\n        <ion-card list *ngIf="notificationsEnabled">\n            <ion-item>\n                <ion-label>{{ \'addon.calendar.notifications\' | translate }}</ion-label>\n                <ion-select [(ngModel)]="notificationTime" (ionChange)="updateNotificationTime($event)" interface="popover">\n                    <ion-option value="-1">{{ \'core.defaultvalue\' | translate :{$a: defaultTimeReadable} }}</ion-option>\n                    <ion-option value="0">{{ \'core.settings.disabled\' | translate }}</ion-option>\n                    <ion-option value="10">{{ 600 | coreDuration }}</ion-option>\n                    <ion-option value="30">{{ 1800 | coreDuration }}</ion-option>\n                    <ion-option value="60">{{ 3600 | coreDuration }}</ion-option>\n                    <ion-option value="120">{{ 7200 | coreDuration }}</ion-option>\n                    <ion-option value="360">{{ 21600 | coreDuration }}</ion-option>\n                    <ion-option value="720">{{ 43200 | coreDuration }}</ion-option>\n                    <ion-option value="1440">{{ 86400 | coreDuration }}</ion-option>\n                </ion-select>\n            </ion-item>\n        </ion-card>\n    </core-loading>\n</ion-content>\n'}),m("design:paramtypes",[a.c,r.a,i.r,l.a,d.a,c.a,s.a,f.a,u.a])],e)}()}});