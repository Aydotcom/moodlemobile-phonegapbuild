webpackJsonp([86],{1757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"AddonModDataSearchPageModule",function(){return h});var n=a(0),o=a(3),i=a(2),r=a(15),s=a(379),d=a(1873),c=a(382),l=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i<3?o(r):i>3?o(t,a,r):o(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},h=function(){function e(){}return e=l([Object(n.I)({declarations:[d.a],imports:[r.a,s.a,c.a,o.l.forChild(d.a),i.b.forChild()]})],e)}()},1873:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var n=a(0),o=a(3),i=a(19),r=a(7),s=a(9),d=a(8),c=a(379),l=a(60),h=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i<3?o(r):i>3?o(t,a,r):o(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,a,n,o,i,r){var s=this;this.viewCtrl=t,this.utils=n,this.domUtils=o,this.fieldsDelegate=i,this.textUtils=r,this.extraImports=[c.a],this.search=e.get("search"),this.fields=e.get("fields"),this.data=e.get("data");var d={};this.search.advanced.forEach(function(e){d[e.name]=e.value?s.textUtils.parseJSON(e.value):""}),this.search.advanced=d,this.searchForm=a.group({text:[this.search.text],sortBy:[this.search.sortBy||0],sortDirection:[this.search.sortDirection||"DESC"],firstname:[this.search.advanced.firstname||""],lastname:[this.search.advanced.lastname||""]}),this.fieldsArray=this.utils.objectToArray(this.fields),this.advancedSearch=this.renderAdvancedSearchFields()}return e.prototype.renderAdvancedSearchFields=function(){if(!this.data.asearchtemplate)return"";this.jsData={fields:this.fields,form:this.searchForm,search:this.search.advanced};var e,t,a=this.data.asearchtemplate;return this.fieldsArray.forEach(function(n){e=(e="[["+n.name+"]]").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=new RegExp(e,"gi"),a=a.replace(e,t='<addon-mod-data-field-plugin mode="search" [field]="fields['+n.id+']" [form]="form" [search]="search"></addon-mod-data-field-plugin>')}),e=new RegExp("##firstname##","gi"),t='<span [formGroup]="form"><ion-input type="text" name="firstname"         [placeholder]="\'addon.mod_data.authorfirstname\' | translate" formControlName="firstname"></ion-input></span>',a=a.replace(e,t),e=new RegExp("##lastname##","gi"),t='<span [formGroup]="form"><ion-input type="text" name="lastname"         [placeholder]="\'addon.mod_data.authorlastname\' | translate" formControlName="lastname"></ion-input></span>',a=a.replace(e,t)},e.prototype.getSearchDataFromForm=function(e){var t=this,a=[];return this.fieldsArray.forEach(function(n){var o=t.fieldsDelegate.getFieldSearchData(n,e);o&&o.forEach(function(e){e.value=JSON.stringify(e.value),a.push(e)})}),e.firstname&&a.push({name:"firstname",value:JSON.stringify(e.firstname)}),e.lastname&&a.push({name:"lastname",value:JSON.stringify(e.lastname)}),a},e.prototype.closeModal=function(e){this.viewCtrl.dismiss(e)},e.prototype.toggleAdvanced=function(){this.search.searchingAdvanced=!this.search.searchingAdvanced},e.prototype.searchEntries=function(){var e=this.searchForm.value;this.search.searchingAdvanced?(this.search.advanced=this.getSearchDataFromForm(e),this.search.searching=this.search.advanced.length>0):(this.search.text=e.text,this.search.searching=this.search.text.length>0),this.search.sortBy=e.sortBy,this.search.sortDirection=e.sortDirection,this.closeModal(this.search)},e=h([Object(n.m)({selector:"page-addon-mod-data-search",template:'<ion-header>\n    <ion-navbar>\n        <ion-title>{{ \'addon.mod_data.search\' | translate }}</ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="closeModal()" [attr.aria-label]="\'core.close\' | translate">\n                <ion-icon name="close"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="fixed-content core-tabs-bar">\n        <a [attr.aria-selected]="!search.searchingAdvanced" (click)="toggleAdvanced()">{{ \'addon.mod_data.search\' | translate}}</a>\n        <a [attr.aria-selected]="search.searchingAdvanced" (click)="toggleAdvanced()">{{ \'addon.mod_data.advancedsearch\' | translate }}</a>\n    </div>\n    <form (ngSubmit)="searchEntries()" [formGroup]="searchForm">\n        <ion-list no-margin>\n            <ion-item [hidden]="search.searchingAdvanced">\n                <ion-input type="text" placeholder="{{ \'addon.mod_data.search\' | translate}}" [(ngModel)]="search.text" name="text" formControlName="text"></ion-input>\n            </ion-item>\n            <ion-item text-wrap>\n                <ion-label stacked>{{ \'core.sortby\' | translate }}</ion-label>\n                <ion-select interface="popover" name="sortBy" formControlName="sortBy">\n                    <optgroup *ngIf="fieldsArray.length" label="{{ \'addon.mod_data.fields\' | translate }}">\n                        <ion-option *ngFor="let field of fieldsArray" [value]="field.id">{{field.name}}</ion-option>\n                    </optgroup>\n                    <optgroup label="{{ \'addon.mod_data.other\' | translate }}">\n                        <ion-option value="0">{{ \'addon.mod_data.timeadded\' | translate }}</ion-option>\n                        <ion-option value="-4">{{ \'addon.mod_data.timemodified\' | translate }}</ion-option>\n                        <ion-option value="-1">{{ \'addon.mod_data.authorfirstname\' | translate }}</ion-option>\n                        <ion-option value="-2">{{ \'addon.mod_data.authorlastname\' | translate }}</ion-option>\n                        <ion-option value="-3" *ngIf="data.approval">{{ \'addon.mod_data.approved\' | translate }}</ion-option>\n                    </optgroup>\n                </ion-select>\n            </ion-item>\n            <ion-list radio-group [(ngModel)]="search.sortDirection" name="sortDirection" formControlName="sortDirection">\n                <ion-item>\n                    <ion-label>{{ \'addon.mod_data.ascending\' | translate }}</ion-label>\n                    <ion-radio value="ASC"></ion-radio>\n                </ion-item>\n                <ion-item>\n                    <ion-label>{{ \'addon.mod_data.descending\' | translate }}</ion-label>\n                    <ion-radio value="DESC"></ion-radio>\n                </ion-item>\n            </ion-list>\n            <div padding [hidden]="!advancedSearch || !search.searchingAdvanced" class="addon-data-advanced-search">\n                <core-compile-html [text]="advancedSearch" [jsData]="jsData" [extraImports]="extraImports"></core-compile-html>\n            </div>\n        </ion-list>\n        <button ion-button block margin type="submit" icon-start>\n            <ion-icon name="search"></ion-icon>\n            {{ \'addon.mod_data.search\' | translate }}\n        </button>\n    </form>\n</ion-content>\n'}),m("design:paramtypes",[o.r,o.z,i.a,r.a,s.a,l.a,d.a])],e)}()}});