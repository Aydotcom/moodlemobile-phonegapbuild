webpackJsonp([6],{1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AddonModAssignEditFeedbackModalPageModule",function(){return p});var i=n(0),o=n(3),a=n(1860),s=n(2),r=n(16),c=n(15),d=n(1839),l=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},p=function(){function e(){}return e=l([Object(i.I)({declarations:[a.a],imports:[r.a,c.a,d.a,o.l.forChild(a.a),s.b.forChild()]})],e)}()},1839:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(0),o=n(17),a=n(3),s=n(2),r=n(16),c=n(15),d=n(75),l=n(43),p=n(877),u=n(878),f=n(881),g=n(1840),h=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},m=function(){function e(){}return e=h([Object(i.I)({declarations:[p.a,u.a,f.a,g.a],imports:[o.b,a.k,s.b.forChild(),r.a,c.a,d.a,l.a],providers:[],exports:[p.a,u.a,f.a,g.a],entryComponents:[p.a]})],e)}()},1840:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),o=n(51),a=n(110),s=n(111),r=n(154),c=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,i){this.injector=e,this.feedbackDelegate=t,this.assignProvider=n,this.assignHelper=i,this.component=o.a.COMPONENT,this.text="",this.files=[]}return e.prototype.ngOnInit=function(){var e=this;this.plugin?(this.plugin.name=this.feedbackDelegate.getPluginName(this.plugin),this.plugin.name?(this.edit=this.edit&&"false"!==this.edit,this.canEdit=this.canEdit&&"false"!==this.canEdit,this.feedbackDelegate.getComponentForPlugin(this.injector,this.plugin).then(function(t){e.pluginComponent=t,t?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId,configs:e.assignHelper.getPluginConfig(e.assign,"assignfeedback",e.plugin.type),edit:e.edit,canEdit:e.canEdit}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.feedbackDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})):this.pluginLoaded=!0):this.pluginLoaded=!0},e.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},c([Object(i._9)(r.a),d("design:type",r.a)],e.prototype,"dynamicComponent",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"assign",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"submission",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"plugin",void 0),c([Object(i.D)(),d("design:type",Number)],e.prototype,"userId",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"canEdit",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"edit",void 0),e=c([Object(i.m)({selector:"addon-mod-assign-feedback-plugin",template:'\n<core-dynamic-component [component]="pluginComponent" [data]="data">\n    \x3c!-- This content will be replaced by the component if found. --\x3e\n    <core-loading [hideUntil]="pluginLoaded">\n        <ion-item text-wrap *ngIf="text.length > 0 || files.length > 0">\n            <h2>{{ plugin.name }}</h2>\n            <ion-badge *ngIf="notSupported" color="primary">\n                {{ \'addon.mod_assign.feedbacknotsupported\' | translate }}\n            </ion-badge>\n            <p *ngIf="text">\n                <core-format-text [component]="component" [componentId]="assign.cmid" [maxHeight]="80" [fullOnClick]="true" [fullTitle]="plugin.name" [text]="text"></core-format-text>\n            </p>\n            <core-file *ngFor="let file of files" [file]="file" [component]="component" [componentId]="assign.cmid" [alwaysDownload]="true"></core-file>\n        </ion-item>\n    </core-loading>\n</core-dynamic-component>\n'}),d("design:paramtypes",[i.C,s.a,o.a,a.a])],e)}()},1860:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(0),o=n(3),a=n(2),s=n(9),r=n(111),c=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,i,o){this.viewCtrl=t,this.domUtils=n,this.translate=i,this.feedbackDelegate=o,this.forceLeave=!1,this.assign=e.get("assign"),this.submission=e.get("submission"),this.plugin=e.get("plugin"),this.userId=e.get("userId")}return e.prototype.ionViewCanLeave=function(){var e=this;return!!this.forceLeave||this.hasDataChanged().then(function(t){if(t)return e.domUtils.showConfirm(e.translate.instant("core.confirmcanceledit"))})},e.prototype.closeModal=function(e){this.viewCtrl.dismiss(e)},e.prototype.done=function(){this.forceLeave=!0,this.closeModal(this.getInputData())},e.prototype.getInputData=function(){return this.domUtils.getDataFromForm(document.forms["addon-mod_assign-edit-feedback-form"])},e.prototype.hasDataChanged=function(){return this.feedbackDelegate.hasPluginDataChanged(this.assign,this.userId,this.plugin,this.getInputData(),this.userId).catch(function(){return!0})},c([Object(i.D)(),d("design:type",Object)],e.prototype,"assign",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"submission",void 0),c([Object(i.D)(),d("design:type",Object)],e.prototype,"plugin",void 0),c([Object(i.D)(),d("design:type",Number)],e.prototype,"userId",void 0),e=c([Object(i.m)({selector:"page-addon-mod-assign-edit-feedback-modal",template:'<ion-header>\n    <ion-navbar>\n        <ion-title><core-format-text [text]="plugin.name"></core-format-text></ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="closeModal()" [attr.aria-label]="\'core.close\' | translate">\n                <ion-icon name="close"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <form name="addon-mod_assign-edit-feedback-form" *ngIf="userId && plugin">\n        <addon-mod-assign-feedback-plugin [assign]="assign" [submission]="submission" [userId]="userId" [plugin]="plugin" [edit]="true"></addon-mod-assign-feedback-plugin>\n        <button ion-button block (click)="done()">{{ \'core.done\' | translate }}</button>\n    </form>\n</ion-content>\n'}),d("design:paramtypes",[o.r,o.z,s.a,a.c,r.a])],e)}()}});